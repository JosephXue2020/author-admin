# ES多表关联设计思路

- 采用每个（需要建立索引的）数据库表，建立一个索引。不使用视图、宽表的方式。

- 实现索引自动化创建：将需要建立索引的表格，设置tag说明es字段的类型；利用反射取到tag的值，自动将数据库表格结构体转化成mappings参数；然后根据这个mappings创建索引。

- 对需要建立索引的表格，在DB.AutoMigrate的时候，建立ES索引。注意判断索引是否存在，不存在则创建。但是实际上，go-elasticsearch应该会判断，创建的index已存在是error不为nil的一种。